# Homework 1-2

### Create Python Development Environment
-----

- Use `virtualenv` to create the Python development environment in a specific folder by
  ```
  virtualenv env
  ```
  shows
  ```
  verwriting /Users/yang/Documents/BitTiger/CS202-1603/env/lib/python2.7/orig-prefix.txt with new content
  New python executable in /Users/yang/Documents/BitTiger/CS202-1603/env/bin/python2.7
  Not overwriting existing python script /Users/yang/Documents/BitTiger/CS202-1603/env/bin/python (you must use
  /Users/yang/Documents/BitTiger/CS202-1603/env/bin/python2.7)
  Installing setuptools, pip, wheel...done.
  ```
  
  then activating the environment by
  ```
  source /env/bin/activate
  ```
  shows
  ```
  (env)  ~/Documents/BitTiger/CS202-1603
  ```
  
  list all packages by
  ```
  pip list
  ```
  shows
  ```
  APScheduler (3.2.0)
click (6.6)
Flask (0.11.1)
funcsigs (1.0.2)
futures (3.0.5)
googlefinance (0.7)
itsdangerous (0.24)
Jinja2 (2.8)
kafka-python (1.3.1)
MarkupSafe (0.23)
pip (8.1.2)
pytz (2016.7)
setuptools (28.6.0)
six (1.10.0)
tzlocal (1.3)
Werkzeug (0.11.11)
wheel (0.30.0a0)
  ```

  freeze the development environment by
  ```
  pip freeze > requirements.txt
  ```
  and `cat requirements.txt` shows
  ```
  APScheduler==3.2.0
click==6.6
Flask==0.11.1
funcsigs==1.0.2
futures==3.0.5
googlefinance==0.7
itsdangerous==0.24
Jinja2==2.8
kafka-python==1.3.1
MarkupSafe==0.23
pytz==2016.7
six==1.10.0
tzlocal==1.3
Werkzeug==0.11.11
  ```

*NOTE*
  - This terminal will be used for executing `data-producer.py`
  - Create another identical one for executing `data-consumer.py`

### Read stock data from google finance
-----
  - Export the configuration file to `data-producer.py` by
  ```
  export ENV_CONFIG_FILE=/Users/yang/Documents/BitTiger/CS202-1603/config/dev.cfg
  ```
  shows
  ```
  ```
  
  then run
  ```
  python data-producer.py
  ```
  shows
  ```
  2016-10-26 11:49:55,430  * Debugger is active!
  ```
  
  In another identical terminal environment execute
  ```
  python data-consumer.py
  ```
  shows
  ```
  ```
  
  Open `Postman` and send a `POST` http request with url
  ```
  localhost:5000/GOOG
  ```
  
  The producer terminal shows
  ```
  2016-10-26 11:50:22,528 Start to fetch stock price for GOOG.
2016-10-26 11:50:23,026 Retrived stock price for GOOG.
2016-10-26 11:50:23,026 Finished writing stock price for GOOG to kafka.
  ```
  
  The consumer terminal shows
  ```
  ConsumerRecord(topic=u'stock-analyzer', partition=0, offset=415, timestamp=1477497398358, timestamp_type=0, key=None, value='[{"Index": "NYSE", "LastTradeWithCurrency": "23.96", "LastTradeDateTime": "2016-10-26T11:52:43Z", "LastTradePrice": "23.96", "LastTradeTime": "11:52AM EDT", "LastTradeDateTimeLong": "Oct 26, 11:52AM EDT", "StockSymbol": "G", "ID": "716027"}, {"Index": "NYSE", "LastTradeWithCurrency": "61.46", "LastTradeDateTime": "2016-10-07T16:03:14Z", "LastTradePrice": "61.46", "LastTradeTime": "4:03PM EDT", "LastTradeDateTimeLong": "Oct 7, 4:03PM EDT", "StockSymbol": "O", "ID": "658117"}, {"Index": "NYSE", "LastTradeWithCurrency": "61.46", "LastTradeDateTime": "2016-10-07T16:03:14Z", "LastTradePrice": "61.46", "LastTradeTime": "4:03PM EDT", "LastTradeDateTimeLong": "Oct 7, 4:03PM EDT", "StockSymbol": "O", "ID": "658117"}, {"Index": "NYSE", "LastTradeWithCurrency": "23.96", "LastTradeDateTime": "2016-10-26T11:52:43Z", "LastTradePrice": "23.96", "LastTradeTime": "11:52AM EDT", "LastTradeDateTimeLong": "Oct 26, 11:52AM EDT", "StockSymbol": "G", "ID": "716027"}]', checksum=-172985025, serialized_key_size=-1, serialized_value_size=958)
  ```

